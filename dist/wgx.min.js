"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var wgx=function(){function n(t,e){_classCallCheck(this,n),this.tick_interval=1e3/30,this.tick_timer,this.width=t,this.height=e,this.frame_count=0,this.stroke_color="",this.mouse=this.vector(0,0),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this._construct_canvas(),this._construct_mouse_listeners()}return _createClass(n,[{key:"vector",value:function(t,e){return{x:t,y:e}}},{key:"translate",value:function(t,e){return this.context.translate(t,e),this}},{key:"rotate",value:function(t){return this.context.rotate(t*Math.PI/180),this}},{key:"tick",value:function(t,e){e=void 0!==e?e:this.tick_interval;var n=this;return this.tick_timer=setInterval(function(){n.frame_count++,n.resetTransform(),t()},e),!0}},{key:"resetTransform",value:function(){return this.context.setTransform(1,0,0,1,0,0),!0}},{key:"stopTick",value:function(){return clearInterval(this.tick_timer),!0}},{key:"background",value:function(t){return this.translate(0,0),this.fill(t),this.context.fillRect(0,0,this.width,this.height),!0}},{key:"fill",value:function(t){return this.context.fillStyle=t,!0}},{key:"stroke",value:function(t){this.stroke_color=t}},{key:"rect",value:function(t,e,n,i){return this.context.fillRect(t,e,n,i),this.stroke_color&&(this.context.strokeStyle=this.stroke_color,this.context.strokeRect(t,e,n,i)),!0}},{key:"text",value:function(t,e,n){return this.context.fillText(t,e,n),!0}},{key:"font",value:function(t){this.context.font=t}},{key:"point",value:function(t,e){return this.rect(t,e,1,1),!0}},{key:"circle",value:function(t,e,n){return this.context.beginPath(),this.context.arc(t,e,n,0,2*Math.PI,!1),this.context.fill(),this.stroke_color&&(this.context.strokeStyle=this.stroke_color,this.context.stroke()),!0}},{key:"on",value:function(t,e){return this.canvas.addEventListener(t,e)}},{key:"keydown",value:function(e){return document.addEventListener("keydown",function(t){e(t.keyCode)}),!0}},{key:"keyup",value:function(e){return document.addEventListener("keyup",function(t){e(t.keyCode)}),!0}},{key:"mousedown",value:function(t){return this.canvas.addEventListener("mousedown",t)}},{key:"mouseup",value:function(t){return this.canvas.addEventListener("mouseup",t)}},{key:"random",value:function(t,e){return void 0!==t&&void 0===e?Math.floor(Math.random()*(t+1)):void 0===t&&void 0===e?Math.random():(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)}},{key:"loadImage",value:function(t,e){var n=new Image;return n.src=t,n.onload=e,n}},{key:"image",value:function(t,e,n){return this.context.drawImage(t,e,n),!0}},{key:"_construct_canvas",value:function(){this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.className="wgx_canvas",document.body.appendChild(this.canvas)}},{key:"_construct_mouse_listeners",value:function(){var e=this;this.canvas.addEventListener("mousemove",function(t){e.mouse.x=t.clientX-e.canvas.getBoundingClientRect().left,e.mouse.y=t.clientY-e.canvas.getBoundingClientRect().top})}}]),n}();